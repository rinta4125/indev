<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <h1>☀熱中症対策アプリ1☀</h1>
  <div>
    <button class="click" id="home">ホーム</button>
    <button class="click" id="wear">コーディネート</button>
    <!--服装共有用SNS(?)に移動-->
    <button class="click" id="map">クールマップ</button>
    <!--涼が取れる施設を表示するマップに移動-->

    <p>
      <button id="wbgt">現在地の暑さ指数は？</button>
    <div id="wbgt_val"></div>
    </p>

    <p>
      <nobr id="wbgt_message"></nobr>
    </p>

    <p>
      <div id="heatstroke"></div>
    </p>

    <p>
      <a href="https://www.wbgt.env.go.jp/wbgt_data.php"> 環境省 熱中症予防情報サイト</a>
      <a href="https://tenki.jp/">tenki.jp/ </a>
    </p>

	<script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"></script>
    <script type="module">

      document.querySelector("#wbgt").onclick = async (event) => {
        //位置情報を取得
        navigator.geolocation.getCurrentPosition(success, error);

        //位置情報の取得に成功したら
        async function success(position) {
          var lat = position.coords.latitude; //緯度
          var lon = position.coords.longitude; //経度

          //位置情報をPOSTでサーバーに送信
          const response = await fetch("/loc", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({lat, lon})
          });
		  alert(lat);
		  alert(lon);
          
        }

        //位置情報の取得に失敗したら
        function error() {
          alert("位置情報が取得できませんでした");
        }
      }
    </script>
  </div>
</body>

</html>